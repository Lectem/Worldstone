<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Worldstone: WorldStone::DC6 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Worldstone
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classWorldStone_1_1DC6.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classWorldStone_1_1DC6-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">WorldStone::DC6 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Decoder for the <a class="el" href="classWorldStone_1_1DC6.html" title="Decoder for the DC6 image format. ">DC6</a> image format.  
 <a href="classWorldStone_1_1DC6.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dc6_8h_source.html">dc6.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWorldStone_1_1DC6_1_1FrameHeader.html">FrameHeader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structWorldStone_1_1DC6_1_1Header.html">Header</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a89def2f7b534a43ec9798e53c9af3817"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorldStone_1_1DC6.html#a89def2f7b534a43ec9798e53c9af3817">Flags</a> { <a class="el" href="classWorldStone_1_1DC6.html#a89def2f7b534a43ec9798e53c9af3817ae4ce92be4922055ace94c7bffe3a2d56">IsSerialized</a> = 1 &lt;&lt; 0, 
<a class="el" href="classWorldStone_1_1DC6.html#a89def2f7b534a43ec9798e53c9af3817ad4da6fcb746608bc3cc6fa5c2c69d283">IsLoadedInHW</a> = 1 &lt;&lt; 1, 
<a class="el" href="classWorldStone_1_1DC6.html#a89def2f7b534a43ec9798e53c9af3817a4c869540041f0de2616b6a9a96fd1ec3">Is24Bits</a> = 1 &lt;&lt; 2
 }</td></tr>
<tr class="separator:a89def2f7b534a43ec9798e53c9af3817"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6d4e3074dac58d2b2dec6ef801426f0f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorldStone_1_1DC6.html#a6d4e3074dac58d2b2dec6ef801426f0f">initDecoder</a> (StreamPtr &amp;&amp;streamPtr)</td></tr>
<tr class="memdesc:a6d4e3074dac58d2b2dec6ef801426f0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start decoding the stream and preparing data.  <a href="#a6d4e3074dac58d2b2dec6ef801426f0f">More...</a><br/></td></tr>
<tr class="separator:a6d4e3074dac58d2b2dec6ef801426f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78878e35a7e45f805ce728346fb7f244"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78878e35a7e45f805ce728346fb7f244"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorldStone_1_1DC6.html#a78878e35a7e45f805ce728346fb7f244">reset</a> ()</td></tr>
<tr class="memdesc:a78878e35a7e45f805ce728346fb7f244"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the decoder and frees resources. <br/></td></tr>
<tr class="separator:a78878e35a7e45f805ce728346fb7f244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268fe9998b7aeba1355fe1eb14ed7407"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a268fe9998b7aeba1355fe1eb14ed7407"></a>
const <a class="el" href="structWorldStone_1_1DC6_1_1Header.html">Header</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getHeader</b> () const </td></tr>
<tr class="separator:a268fe9998b7aeba1355fe1eb14ed7407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cec4f181e339102845e8f2e45890cde"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9cec4f181e339102845e8f2e45890cde"></a>
const std::vector&lt; <a class="el" href="structWorldStone_1_1DC6_1_1FrameHeader.html">FrameHeader</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getFrameHeaders</b> () const </td></tr>
<tr class="separator:a9cec4f181e339102845e8f2e45890cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2620c42aeac2f55f64725d7044375acf"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorldStone_1_1DC6.html#a2620c42aeac2f55f64725d7044375acf">decompressFrame</a> (size_t frameNumber) const </td></tr>
<tr class="memdesc:a2620c42aeac2f55f64725d7044375acf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decompress the given frame.  <a href="#a2620c42aeac2f55f64725d7044375acf">More...</a><br/></td></tr>
<tr class="separator:a2620c42aeac2f55f64725d7044375acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd22c2b71615db72815e1f28d3e28ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9bd22c2b71615db72815e1f28d3e28ce"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWorldStone_1_1DC6.html#a9bd22c2b71615db72815e1f28d3e28ce">decompressFrameIn</a> (size_t frameNumber, uint8_t *data) const </td></tr>
<tr class="memdesc:a9bd22c2b71615db72815e1f28d3e28ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="classWorldStone_1_1DC6.html#a2620c42aeac2f55f64725d7044375acf">decompressFrame</a> but will output the data in a given buffer. <br/></td></tr>
<tr class="separator:a9bd22c2b71615db72815e1f28d3e28ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5812478ca5ed1e727bbb74e2e78b33"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a5812478ca5ed1e727bbb74e2e78b33"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>exportToPPM</b> (const char *ppmFilenameBase, const <a class="el" href="structWorldStone_1_1Palette.html">Palette</a> &amp;palette) const </td></tr>
<tr class="separator:a0a5812478ca5ed1e727bbb74e2e78b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa97ff4babbdd1abcd08e11ff6d8e8540"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa97ff4babbdd1abcd08e11ff6d8e8540"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>extractHeaders</b> ()</td></tr>
<tr class="separator:aa97ff4babbdd1abcd08e11ff6d8e8540"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a6e09f6148b2354cf7a99c6a04b4cc039"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e09f6148b2354cf7a99c6a04b4cc039"></a>
StreamPtr&#160;</td><td class="memItemRight" valign="bottom"><b>stream</b> = nullptr</td></tr>
<tr class="separator:a6e09f6148b2354cf7a99c6a04b4cc039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d70445b4381dc56f0569219627aa38"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a54d70445b4381dc56f0569219627aa38"></a>
<a class="el" href="structWorldStone_1_1DC6_1_1Header.html">Header</a>&#160;</td><td class="memItemRight" valign="bottom"><b>header</b></td></tr>
<tr class="separator:a54d70445b4381dc56f0569219627aa38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3827796a7507a1ad1d8aa3bd594dde8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3827796a7507a1ad1d8aa3bd594dde8"></a>
std::vector&lt; uint32_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>framePointers</b></td></tr>
<tr class="separator:aa3827796a7507a1ad1d8aa3bd594dde8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218b22d620aebaf03bcf4307810187b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a218b22d620aebaf03bcf4307810187b7"></a>
std::vector&lt; <a class="el" href="structWorldStone_1_1DC6_1_1FrameHeader.html">FrameHeader</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>frameHeaders</b></td></tr>
<tr class="separator:a218b22d620aebaf03bcf4307810187b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Decoder for the <a class="el" href="classWorldStone_1_1DC6.html" title="Decoder for the DC6 image format. ">DC6</a> image format. </p>
<p>The <a class="el" href="classWorldStone_1_1DC6.html" title="Decoder for the DC6 image format. ">DC6</a> (Diablo Cel 6) format is a compressed sprite image format. It can store multiple directions and frames in a single file. A palette is used to generate the colors, but the file itself doesn't have any information about the palette to use, it is up to the user to know which one to use. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structWorldStone_1_1Palette.html" title="Helper to load a Diablo 2 palette (.pal/.dat format) ">WorldStone::Palette</a></dd></dl>
<p>This format is mostly used for menu, items but also for some monsters (eg:Mephisto) This is an update of diablo 1 Cel format</p>
<p>Layout of a <a class="el" href="classWorldStone_1_1DC6.html" title="Decoder for the DC6 image format. ">DC6</a> file: </p>
<table class="doxtable">
<tr>
<th>Name </th><th>Type </th><th>Size in bytes </th><th>Offsets  </th></tr>
<tr>
<td>header </td><td><a class="el" href="structWorldStone_1_1DC6_1_1Header.html">DC6::Header</a> </td><td>24 </td><td>0x00 </td></tr>
<tr>
<td>framePointers </td><td>uint32_t[dirs][framesPerDir] </td><td>4 * header.directions * header.framesPerDir </td><td>0x18 </td></tr>
<tr>
<td>frameHeader[0] </td><td><a class="el" href="structWorldStone_1_1DC6_1_1FrameHeader.html">DC6::FrameHeader</a> </td><td>32 </td><td>framePointers[0] </td></tr>
<tr>
<td>frameData[0] </td><td>uint8_t[frameHeader.length] </td><td>frameHeader[0].length </td><td>^ </td></tr>
<tr>
<td>skipColor[0] </td><td>uint8_t[3] </td><td>3 </td><td>^ </td></tr>
<tr>
<td>... other frames ... </td><td></td><td></td></tr>
<tr>
<td>frameHeader[totalFrames-1] </td><td><a class="el" href="structWorldStone_1_1DC6_1_1FrameHeader.html">DC6::FrameHeader</a> </td><td>32 </td><td>framePointers[nbFrames-1] </td></tr>
<tr>
<td>frameData[totalFrames-1] </td><td>uint8_t[frameHeader.length] </td><td>frameHeader[nbFrames-1].length </td><td>^ </td></tr>
<tr>
<td>skipColor[totalFrames-1] </td><td>uint8_t[3] </td><td>3 </td><td>^ </td></tr>
</table>

<p>Definition at line <a class="el" href="dc6_8h_source.html#l00039">39</a> of file <a class="el" href="dc6_8h_source.html">dc6.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a89def2f7b534a43ec9798e53c9af3817"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classWorldStone_1_1DC6.html#a89def2f7b534a43ec9798e53c9af3817">WorldStone::DC6::Flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a89def2f7b534a43ec9798e53c9af3817ae4ce92be4922055ace94c7bffe3a2d56"></a>IsSerialized</em>&#160;</td><td class="fielddoc">
<p>Always set for files. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a89def2f7b534a43ec9798e53c9af3817ad4da6fcb746608bc3cc6fa5c2c69d283"></a>IsLoadedInHW</em>&#160;</td><td class="fielddoc">
<p>Used by the game to know if the file was loaded in the renderer. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a89def2f7b534a43ec9798e53c9af3817a4c869540041f0de2616b6a9a96fd1ec3"></a>Is24Bits</em>&#160;</td><td class="fielddoc">
<p>Used internally by the game for 24 to 8 bits per color conversion. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="dc6_8h_source.html#l00042">42</a> of file <a class="el" href="dc6_8h_source.html">dc6.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2620c42aeac2f55f64725d7044375acf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; uint8_t &gt; WorldStone::DC6::decompressFrame </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>frameNumber</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decompress the given frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frameNumber</td><td>The frame number in the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid vector to the data on success, empty one on failure </dd></dl>

<p>Definition at line <a class="el" href="dc6_8cpp_source.html#l00056">56</a> of file <a class="el" href="dc6_8cpp_source.html">dc6.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6d4e3074dac58d2b2dec6ef801426f0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WorldStone::DC6::initDecoder </td>
          <td>(</td>
          <td class="paramtype">StreamPtr &amp;&amp;&#160;</td>
          <td class="paramname"><em>streamPtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start decoding the stream and preparing data. </p>
<dl class="section return"><dt>Returns</dt><dd>true on success</dd></dl>
<p>Prepares the decoder to read the frames using <a class="el" href="classWorldStone_1_1DC6.html#a2620c42aeac2f55f64725d7044375acf">decompressFrame</a>. Basically calls extractHeaders(), so that you can call getHeader() and getFrameHeaders(). </p>

<p>Definition at line <a class="el" href="dc6_8cpp_source.html#l00017">17</a> of file <a class="el" href="dc6_8cpp_source.html">dc6.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>source/decoders/include/<a class="el" href="dc6_8h_source.html">dc6.h</a></li>
<li>source/decoders/src/<a class="el" href="dc6_8cpp_source.html">dc6.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>WorldStone</b></li><li class="navelem"><a class="el" href="classWorldStone_1_1DC6.html">DC6</a></li>
    <li class="footer">Generated on Wed Oct 28 2020 20:30:53 for Worldstone by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
